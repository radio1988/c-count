Index: workflow/scripts/auc_plot.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/workflow/scripts/auc_plot.py b/workflow/scripts/auc_plot.py
new file mode 100644
--- /dev/null	(date 1741878957886)
+++ b/workflow/scripts/auc_plot.py	(date 1741878957886)
@@ -0,0 +1,28 @@
+import numpy as np
+import matplotlib.pyplot as plt
+from sklearn.metrics import precision_recall_curve, auc
+
+# Example data
+y_true = np.array([0, 0, 1, 1, 1, 0, 1, 0, 1, 0])  # Ground truth (0 or 1)
+y_scores = np.array([0.1, 0.4, 0.35, 0.8, 0.76, 0.3, 0.9, 0.2, 0.85, 0.5])  # Predicted probabilities
+
+# Compute precision-recall curve
+precision, recall, _ = precision_recall_curve(y_true, y_scores)
+
+# Compute AUC-PR
+auc_pr = auc(recall, precision)
+
+# Plot Precision-Recall curve
+plt.figure(figsize=(6, 6))
+plt.plot(recall, precision, marker='.', label=f'AUC-PR = {auc_pr:.2f}')
+plt.xlabel('Recall')
+plt.ylabel('Precision')
+plt.title('Precision-Recall Curve')
+plt.legend()
+plt.grid()
+
+# Save plot to PDF
+plt.savefig("precision_recall_curve.pdf", format="pdf", bbox_inches="tight")
+
+# Show the plot (optional)
+plt.show()
Index: .idea/vcs.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project version=\"4\">\n  <component name=\"VcsDirectoryMappings\">\n    <mapping directory=\"$PROJECT_DIR$\" vcs=\"Git\" />\n    <mapping directory=\"$PROJECT_DIR$/mnielsen/rmnist\" vcs=\"Git\" />\n  </component>\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/vcs.xml b/.idea/vcs.xml
--- a/.idea/vcs.xml	(revision 9d81f221f11b1a07cf20562ecff7114a51876311)
+++ b/.idea/vcs.xml	(date 1741109537891)
@@ -2,6 +2,5 @@
 <project version="4">
   <component name="VcsDirectoryMappings">
     <mapping directory="$PROJECT_DIR$" vcs="Git" />
-    <mapping directory="$PROJECT_DIR$/mnielsen/rmnist" vcs="Git" />
   </component>
 </project>
\ No newline at end of file
Index: .idea/misc.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project version=\"4\">\n  <component name=\"ProjectRootManager\" version=\"2\" project-jdk-name=\"Python 3.10 (bio)\" project-jdk-type=\"Python SDK\" />\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/misc.xml b/.idea/misc.xml
--- a/.idea/misc.xml	(revision 9d81f221f11b1a07cf20562ecff7114a51876311)
+++ b/.idea/misc.xml	(date 1741109545088)
@@ -1,4 +1,7 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <project version="4">
+  <component name="Black">
+    <option name="sdkName" value="Python 3.10 (bio)" />
+  </component>
   <component name="ProjectRootManager" version="2" project-jdk-name="Python 3.10 (bio)" project-jdk-type="Python SDK" />
 </project>
\ No newline at end of file
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project version=\"4\">\n  <component name=\"AnalysisUIOptions\">\n    <option name=\"SCOPE_TYPE\" value=\"3\" />\n  </component>\n  <component name=\"ChangeListManager\">\n    <list default=\"true\" id=\"6f342c8f-3d45-4073-b745-2cc3bed6378a\" name=\"Changes\" comment=\"basic reset added\">\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/workflow/train.Snakefile\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/workflow/train.Snakefile\" afterDir=\"false\" />\n    </list>\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\n  </component>\n  <component name=\"FileTemplateManagerImpl\">\n    <option name=\"RECENT_TEMPLATES\">\n      <list>\n        <option value=\"Python Script\" />\n      </list>\n    </option>\n  </component>\n  <component name=\"Git.Settings\">\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\n  </component>\n  <component name=\"MarkdownSettingsMigration\">\n    <option name=\"stateVersion\" value=\"1\" />\n  </component>\n  <component name=\"ProjectId\" id=\"2eLCXCw9rAJXxDExfd0OJut1Nsr\" />\n  <component name=\"ProjectLevelVcsManager\" settingsEditedManually=\"true\" />\n  <component name=\"ProjectViewState\">\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\n    <option name=\"showLibraryContents\" value=\"true\" />\n  </component>\n  <component name=\"PropertiesComponent\">{\n  &quot;keyToString&quot;: {\n    &quot;RunOnceActivity.OpenProjectViewOnStart&quot;: &quot;true&quot;,\n    &quot;RunOnceActivity.ShowReadmeOnStart&quot;: &quot;true&quot;,\n    &quot;last_opened_file_path&quot;: &quot;/Users/rui/github/ccount&quot;,\n    &quot;run.code.analysis.last.selected.profile&quot;: &quot;pProject Default&quot;,\n    &quot;settings.editor.selected.configurable&quot;: &quot;project.propVCSSupport.DirectoryMappings&quot;\n  }\n}</component>\n  <component name=\"RecentsManager\">\n    <key name=\"CopyFile.RECENT_KEYS\">\n      <recent name=\"$PROJECT_DIR$/workflow/scripts\" />\n    </key>\n    <key name=\"MoveFile.RECENT_KEYS\">\n      <recent name=\"$PROJECT_DIR$/workflow/scripts/ccount\" />\n    </key>\n  </component>\n  <component name=\"RunManager\">\n    <configuration name=\"test\" type=\"PythonConfigurationType\" factoryName=\"Python\" temporary=\"true\" nameIsGenerated=\"true\">\n      <module name=\"ccount\" />\n      <option name=\"INTERPRETER_OPTIONS\" value=\"\" />\n      <option name=\"PARENT_ENVS\" value=\"true\" />\n      <envs>\n        <env name=\"PYTHONUNBUFFERED\" value=\"1\" />\n      </envs>\n      <option name=\"SDK_HOME\" value=\"\" />\n      <option name=\"WORKING_DIRECTORY\" value=\"$USER_HOME$/Documents/Family Share/GIS/test\" />\n      <option name=\"IS_MODULE_SDK\" value=\"false\" />\n      <option name=\"ADD_CONTENT_ROOTS\" value=\"true\" />\n      <option name=\"ADD_SOURCE_ROOTS\" value=\"true\" />\n      <option name=\"SCRIPT_NAME\" value=\"$USER_HOME$/Documents/Family Share/GIS/test/test.py\" />\n      <option name=\"PARAMETERS\" value=\"\" />\n      <option name=\"SHOW_COMMAND_LINE\" value=\"false\" />\n      <option name=\"EMULATE_TERMINAL\" value=\"false\" />\n      <option name=\"MODULE_MODE\" value=\"false\" />\n      <option name=\"REDIRECT_INPUT\" value=\"false\" />\n      <option name=\"INPUT_FILE\" value=\"\" />\n      <method v=\"2\" />\n    </configuration>\n    <recent_temporary>\n      <list>\n        <item itemvalue=\"Python.test\" />\n      </list>\n    </recent_temporary>\n  </component>\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\n  <component name=\"TaskManager\">\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\n      <changelist id=\"6f342c8f-3d45-4073-b745-2cc3bed6378a\" name=\"Changes\" comment=\"\" />\n      <created>1711674509003</created>\n      <option name=\"number\" value=\"Default\" />\n      <option name=\"presentableId\" value=\"Default\" />\n      <updated>1711674509003</updated>\n    </task>\n    <task id=\"LOCAL-00058\" summary=\"visualize_blob_detection -&gt; visualize_blobs_on_img\">\n      <created>1732780412967</created>\n      <option name=\"number\" value=\"00058\" />\n      <option name=\"presentableId\" value=\"LOCAL-00058\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1732780412967</updated>\n    </task>\n    <task id=\"LOCAL-00059\" summary=\"blob_detection_visualization: True  removed from config.yaml\">\n      <created>1732780710151</created>\n      <option name=\"number\" value=\"00059\" />\n      <option name=\"presentableId\" value=\"LOCAL-00059\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1732780710151</updated>\n    </task>\n    <task id=\"LOCAL-00060\" summary=\"blob_detection.smk and czi2img.smk split from count.Snakefile\">\n      <created>1732780787417</created>\n      <option name=\"number\" value=\"00060\" />\n      <option name=\"presentableId\" value=\"LOCAL-00060\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1732780787418</updated>\n    </task>\n    <task id=\"LOCAL-00061\" summary=\"jpg2npy.Snakefile: aggr_label_count takes correct amount of scenes\">\n      <created>1732781095665</created>\n      <option name=\"number\" value=\"00061\" />\n      <option name=\"presentableId\" value=\"LOCAL-00061\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1732781095665</updated>\n    </task>\n    <task id=\"LOCAL-00062\" summary=\"jpg2npy.Snakefile: organize log\">\n      <created>1732781879635</created>\n      <option name=\"number\" value=\"00062\" />\n      <option name=\"presentableId\" value=\"LOCAL-00062\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1732781879635</updated>\n    </task>\n    <task id=\"LOCAL-00063\" summary=\"jpg2npy.Snakefile: organize log, added view/jpg in check\">\n      <created>1732990177800</created>\n      <option name=\"number\" value=\"00063\" />\n      <option name=\"presentableId\" value=\"LOCAL-00063\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1732990177801</updated>\n    </task>\n    <task id=\"LOCAL-00064\" summary=\"take blob/io.py blob/misc.py to blob_utils.py\">\n      <created>1733029795494</created>\n      <option name=\"number\" value=\"00064\" />\n      <option name=\"presentableId\" value=\"LOCAL-00064\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1733029795494</updated>\n    </task>\n    <task id=\"LOCAL-00065\" summary=\"label/ draft folder removed\">\n      <created>1733029875053</created>\n      <option name=\"number\" value=\"00065\" />\n      <option name=\"presentableId\" value=\"LOCAL-00065\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1733029875053</updated>\n    </task>\n    <task id=\"LOCAL-00066\" summary=\"load_locs and load_crops becomes load_locs\">\n      <created>1733031925141</created>\n      <option name=\"number\" value=\"00066\" />\n      <option name=\"presentableId\" value=\"LOCAL-00066\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1733031925141</updated>\n    </task>\n    <task id=\"LOCAL-00067\" summary=\"get_blob_statistics includes blob_width now\">\n      <created>1733033452389</created>\n      <option name=\"number\" value=\"00067\" />\n      <option name=\"presentableId\" value=\"LOCAL-00067\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1733033452389</updated>\n    </task>\n    <task id=\"LOCAL-00068\" summary=\"blob_utils first round clean up\">\n      <created>1733036816622</created>\n      <option name=\"number\" value=\"00068\" />\n      <option name=\"presentableId\" value=\"LOCAL-00068\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1733036816622</updated>\n    </task>\n    <task id=\"LOCAL-00069\" summary=\"img_utils\">\n      <created>1733037014629</created>\n      <option name=\"number\" value=\"00069\" />\n      <option name=\"presentableId\" value=\"LOCAL-00069\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1733037014629</updated>\n    </task>\n    <task id=\"LOCAL-00070\" summary=\"jpg2npy.py 9 pixel works\">\n      <created>1733042280854</created>\n      <option name=\"number\" value=\"00070\" />\n      <option name=\"presentableId\" value=\"LOCAL-00070\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1733042280854</updated>\n    </task>\n    <task id=\"LOCAL-00071\" summary=\"fixed bugs introduced in the module re-organization\">\n      <created>1733084728434</created>\n      <option name=\"number\" value=\"00071\" />\n      <option name=\"presentableId\" value=\"LOCAL-00071\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1733084728434</updated>\n    </task>\n    <task id=\"LOCAL-00072\" summary=\"works, now on jpg2npy again\">\n      <created>1733139537100</created>\n      <option name=\"number\" value=\"00072\" />\n      <option name=\"presentableId\" value=\"LOCAL-00072\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1733139537100</updated>\n    </task>\n    <task id=\"LOCAL-00073\" summary=\"jpg2npy 9pixel works\">\n      <created>1733145037572</created>\n      <option name=\"number\" value=\"00073\" />\n      <option name=\"presentableId\" value=\"LOCAL-00073\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1733145037572</updated>\n    </task>\n    <task id=\"LOCAL-00074\" summary=\"jpg2npy.Snakefile verified to work\">\n      <created>1733163456191</created>\n      <option name=\"number\" value=\"00074\" />\n      <option name=\"presentableId\" value=\"LOCAL-00074\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1733163456191</updated>\n    </task>\n    <task id=\"LOCAL-00075\" summary=\"fix imports in count.Snakefile\">\n      <created>1733201176184</created>\n      <option name=\"number\" value=\"00075\" />\n      <option name=\"presentableId\" value=\"LOCAL-00075\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1733201176184</updated>\n    </task>\n    <task id=\"LOCAL-00076\" summary=\"jpg2npy validated\">\n      <created>1733208947991</created>\n      <option name=\"number\" value=\"00076\" />\n      <option name=\"presentableId\" value=\"LOCAL-00076\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1733208947991</updated>\n    </task>\n    <task id=\"LOCAL-00077\" summary=\"get_blob_statistics logic simplified\">\n      <created>1734003117875</created>\n      <option name=\"number\" value=\"00077\" />\n      <option name=\"presentableId\" value=\"LOCAL-00077\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1734003117875</updated>\n    </task>\n    <task id=\"LOCAL-00078\" summary=\"mask_blob_img renamed\">\n      <created>1734003889293</created>\n      <option name=\"number\" value=\"00078\" />\n      <option name=\"presentableId\" value=\"LOCAL-00078\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1734003889293</updated>\n    </task>\n    <task id=\"LOCAL-00079\" summary=\"blob.py &quot;&quot;&quot;\">\n      <created>1734004293931</created>\n      <option name=\"number\" value=\"00079\" />\n      <option name=\"presentableId\" value=\"LOCAL-00079\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1734004293931</updated>\n    </task>\n    <task id=\"LOCAL-00080\" summary=\"ccount_utils.clas import split_data\">\n      <created>1734008700934</created>\n      <option name=\"number\" value=\"00080\" />\n      <option name=\"presentableId\" value=\"LOCAL-00080\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1734008700934</updated>\n    </task>\n    <task id=\"LOCAL-00081\" summary=\"ccount_utils.clas\">\n      <created>1734009374534</created>\n      <option name=\"number\" value=\"00081\" />\n      <option name=\"presentableId\" value=\"LOCAL-00081\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1734009374535</updated>\n    </task>\n    <task id=\"LOCAL-00082\" summary=\"eval_classification.py renamed\">\n      <created>1734013514623</created>\n      <option name=\"number\" value=\"00082\" />\n      <option name=\"presentableId\" value=\"LOCAL-00082\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1734013514623</updated>\n    </task>\n    <task id=\"LOCAL-00083\" summary=\"protected hdf in train.Snakefile and labeled_crops in jpg2npy.Snakefile\">\n      <created>1734031376464</created>\n      <option name=\"number\" value=\"00083\" />\n      <option name=\"presentableId\" value=\"LOCAL-00083\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1734031376464</updated>\n    </task>\n    <task id=\"LOCAL-00084\" summary=\"train.Snakefile: rep1,2,3,4 added for training [major]\">\n      <created>1734034313788</created>\n      <option name=\"number\" value=\"00084\" />\n      <option name=\"presentableId\" value=\"LOCAL-00084\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1734034313789</updated>\n    </task>\n    <task id=\"LOCAL-00085\" summary=\"train.Snakefile: plot_saturation.py added [major]\">\n      <created>1734041447533</created>\n      <option name=\"number\" value=\"00085\" />\n      <option name=\"presentableId\" value=\"LOCAL-00085\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1734041447533</updated>\n    </task>\n    <task id=\"LOCAL-00086\" summary=\"train.Snakefile: plot_saturation.py makedir\">\n      <created>1734086480768</created>\n      <option name=\"number\" value=\"00086\" />\n      <option name=\"presentableId\" value=\"LOCAL-00086\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1734086480768</updated>\n    </task>\n    <task id=\"LOCAL-00087\" summary=\"randomized sub-sets\">\n      <created>1734241583291</created>\n      <option name=\"number\" value=\"00087\" />\n      <option name=\"presentableId\" value=\"LOCAL-00087\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1734241583291</updated>\n    </task>\n    <task id=\"LOCAL-00088\" summary=\"polish\">\n      <created>1734670394405</created>\n      <option name=\"number\" value=\"00088\" />\n      <option name=\"presentableId\" value=\"LOCAL-00088\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1734670394406</updated>\n    </task>\n    <task id=\"LOCAL-00089\" summary=\"get_replicate adapted to more situations\">\n      <created>1737495838504</created>\n      <option name=\"number\" value=\"00089\" />\n      <option name=\"presentableId\" value=\"LOCAL-00089\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1737495838505</updated>\n    </task>\n    <task id=\"LOCAL-00090\" summary=\"polished\">\n      <created>1737579776071</created>\n      <option name=\"number\" value=\"00090\" />\n      <option name=\"presentableId\" value=\"LOCAL-00090\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1737579776071</updated>\n    </task>\n    <task id=\"LOCAL-00091\" summary=\"more RAM for evaluation_on_val\">\n      <created>1737580049227</created>\n      <option name=\"number\" value=\"00091\" />\n      <option name=\"presentableId\" value=\"LOCAL-00091\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1737580049227</updated>\n    </task>\n    <task id=\"LOCAL-00092\" summary=\"reduce RAM in evaluation_on_val.py\">\n      <created>1737580439886</created>\n      <option name=\"number\" value=\"00092\" />\n      <option name=\"presentableId\" value=\"LOCAL-00092\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1737580439886</updated>\n    </task>\n    <task id=\"LOCAL-00093\" summary=\"reduce RAM in evaluation_on_val rule\">\n      <created>1737580806309</created>\n      <option name=\"number\" value=\"00093\" />\n      <option name=\"presentableId\" value=\"LOCAL-00093\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1737580806309</updated>\n    </task>\n    <task id=\"LOCAL-00094\" summary=\"fixed bug and new plotting functions\">\n      <created>1738186791244</created>\n      <option name=\"number\" value=\"00094\" />\n      <option name=\"presentableId\" value=\"LOCAL-00094\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1738186791244</updated>\n    </task>\n    <task id=\"LOCAL-00095\" summary=\"8-&gt; 16G RAM for blob_detection\">\n      <created>1738189395091</created>\n      <option name=\"number\" value=\"00095\" />\n      <option name=\"presentableId\" value=\"LOCAL-00095\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1738189395091</updated>\n    </task>\n    <task id=\"LOCAL-00096\" summary=\"from keras.utils import to_categorical (now)\">\n      <created>1738242352070</created>\n      <option name=\"number\" value=\"00096\" />\n      <option name=\"presentableId\" value=\"LOCAL-00096\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1738242352070</updated>\n    </task>\n    <task id=\"LOCAL-00097\" summary=\"misc\">\n      <created>1738242459584</created>\n      <option name=\"number\" value=\"00097\" />\n      <option name=\"presentableId\" value=\"LOCAL-00097\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1738242459584</updated>\n    </task>\n    <task id=\"LOCAL-00098\" summary=\"blob_classification.py: probs in npy and probs in txt\">\n      <created>1738254160631</created>\n      <option name=\"number\" value=\"00098\" />\n      <option name=\"presentableId\" value=\"LOCAL-00098\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1738254160631</updated>\n    </task>\n    <task id=\"LOCAL-00099\" summary=\"train.Snakefile: simpler rule names, 16 threads for training\">\n      <created>1738255046940</created>\n      <option name=\"number\" value=\"00099\" />\n      <option name=\"presentableId\" value=\"LOCAL-00099\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1738255046940</updated>\n    </task>\n    <task id=\"LOCAL-00100\" summary=\"blob_classification.py: output clas.txt .prob and prob.npy\">\n      <created>1738256561887</created>\n      <option name=\"number\" value=\"00100\" />\n      <option name=\"presentableId\" value=\"LOCAL-00100\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1738256561887</updated>\n    </task>\n    <task id=\"LOCAL-00101\" summary=\"classification1 -&gt; count\">\n      <created>1738256842568</created>\n      <option name=\"number\" value=\"00101\" />\n      <option name=\"presentableId\" value=\"LOCAL-00101\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1738256842568</updated>\n    </task>\n    <task id=\"LOCAL-00102\" summary=\"blob_classification.py: back to binary output, with probs(txt) added\">\n      <created>1738260205484</created>\n      <option name=\"number\" value=\"00102\" />\n      <option name=\"presentableId\" value=\"LOCAL-00102\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1738260205484</updated>\n    </task>\n    <task id=\"LOCAL-00103\" summary=\"plt.close()\">\n      <created>1738262452404</created>\n      <option name=\"number\" value=\"00103\" />\n      <option name=\"presentableId\" value=\"LOCAL-00103\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1738262452404</updated>\n    </task>\n    <task id=\"LOCAL-00104\" summary=\"blob_classification.py: MIN_P takes config.yaml\">\n      <created>1738263914873</created>\n      <option name=\"number\" value=\"00104\" />\n      <option name=\"presentableId\" value=\"LOCAL-00104\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1738263914873</updated>\n    </task>\n    <task id=\"LOCAL-00105\" summary=\"blob_classification.py: from tensorflow.keras.optimizers import Adam\">\n      <created>1738354476555</created>\n      <option name=\"number\" value=\"00105\" />\n      <option name=\"presentableId\" value=\"LOCAL-00105\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1738354476555</updated>\n    </task>\n    <task id=\"LOCAL-00106\" summary=\"basic reset added\">\n      <created>1738465376929</created>\n      <option name=\"number\" value=\"00106\" />\n      <option name=\"presentableId\" value=\"LOCAL-00106\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1738465376929</updated>\n    </task>\n    <option name=\"localTasksCounter\" value=\"107\" />\n    <servers />\n  </component>\n  <component name=\"Vcs.Log.History.Properties\">\n    <option name=\"COLUMN_ID_ORDER\">\n      <list>\n        <option value=\"Default.Root\" />\n        <option value=\"Default.Author\" />\n        <option value=\"Default.Date\" />\n        <option value=\"Default.Subject\" />\n      </list>\n    </option>\n  </component>\n  <component name=\"Vcs.Log.Tabs.Properties\">\n    <option name=\"TAB_STATES\">\n      <map>\n        <entry key=\"MAIN\">\n          <value>\n            <State />\n          </value>\n        </entry>\n      </map>\n    </option>\n  </component>\n  <component name=\"VcsManagerConfiguration\">\n    <MESSAGE value=\"eval_classification.py renamed\" />\n    <MESSAGE value=\"protected hdf in train.Snakefile and labeled_crops in jpg2npy.Snakefile\" />\n    <MESSAGE value=\"train.Snakefile: rep1,2,3,4 added for training [major]\" />\n    <MESSAGE value=\"train.Snakefile: plot_saturation.py added [major]\" />\n    <MESSAGE value=\"train.Snakefile: plot_saturation.py makedir\" />\n    <MESSAGE value=\"randomized sub-sets\" />\n    <MESSAGE value=\"polish\" />\n    <MESSAGE value=\"get_replicate adapted to more situations\" />\n    <MESSAGE value=\"polished\" />\n    <MESSAGE value=\"more RAM for evaluation_on_val\" />\n    <MESSAGE value=\"reduce RAM in evaluation_on_val.py\" />\n    <MESSAGE value=\"reduce RAM in evaluation_on_val rule\" />\n    <MESSAGE value=\"fixed bug and new plotting functions\" />\n    <MESSAGE value=\"8-&gt; 16G RAM for blob_detection\" />\n    <MESSAGE value=\"from keras.utils import to_categorical (now)\" />\n    <MESSAGE value=\"misc\" />\n    <MESSAGE value=\"blob_classification.py: probs in npy and probs in txt\" />\n    <MESSAGE value=\"train.Snakefile: simpler rule names, 16 threads for training\" />\n    <MESSAGE value=\"blob_classification.py: output clas.txt .prob and prob.npy\" />\n    <MESSAGE value=\"classification1 -&gt; count\" />\n    <MESSAGE value=\"blob_classification.py: back to binary output, with probs(txt) added\" />\n    <MESSAGE value=\"plt.close()\" />\n    <MESSAGE value=\"blob_classification.py: MIN_P takes config.yaml\" />\n    <MESSAGE value=\"blob_classification.py: from tensorflow.keras.optimizers import Adam\" />\n    <MESSAGE value=\"basic reset added\" />\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"basic reset added\" />\n  </component>\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision 9d81f221f11b1a07cf20562ecff7114a51876311)
+++ b/.idea/workspace.xml	(date 1742223809705)
@@ -3,10 +3,16 @@
   <component name="AnalysisUIOptions">
     <option name="SCOPE_TYPE" value="3" />
   </component>
+  <component name="AutoImportSettings">
+    <option name="autoReloadType" value="SELECTIVE" />
+  </component>
   <component name="ChangeListManager">
-    <list default="true" id="6f342c8f-3d45-4073-b745-2cc3bed6378a" name="Changes" comment="basic reset added">
+    <list default="true" id="6f342c8f-3d45-4073-b745-2cc3bed6378a" name="Changes" comment="more RAM for jpg2npy">
+      <change afterPath="$PROJECT_DIR$/workflow/scripts/auc_plot.py" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/.idea/misc.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/misc.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/.idea/vcs.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/vcs.xml" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/workflow/train.Snakefile" beforeDir="false" afterPath="$PROJECT_DIR$/workflow/train.Snakefile" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/workflow/notebooks/utils/plotting.py" beforeDir="false" afterPath="$PROJECT_DIR$/workflow/notebooks/utils/plotting.py" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
@@ -26,6 +32,9 @@
   <component name="MarkdownSettingsMigration">
     <option name="stateVersion" value="1" />
   </component>
+  <component name="ProjectColorInfo">{
+  &quot;associatedIndex&quot;: 7
+}</component>
   <component name="ProjectId" id="2eLCXCw9rAJXxDExfd0OJut1Nsr" />
   <component name="ProjectLevelVcsManager" settingsEditedManually="true" />
   <component name="ProjectViewState">
@@ -36,9 +45,22 @@
   &quot;keyToString&quot;: {
     &quot;RunOnceActivity.OpenProjectViewOnStart&quot;: &quot;true&quot;,
     &quot;RunOnceActivity.ShowReadmeOnStart&quot;: &quot;true&quot;,
+    &quot;RunOnceActivity.git.unshallow&quot;: &quot;true&quot;,
+    &quot;git-widget-placeholder&quot;: &quot;singularity&quot;,
     &quot;last_opened_file_path&quot;: &quot;/Users/rui/github/ccount&quot;,
+    &quot;node.js.detected.package.eslint&quot;: &quot;true&quot;,
+    &quot;node.js.detected.package.tslint&quot;: &quot;true&quot;,
+    &quot;node.js.selected.package.eslint&quot;: &quot;(autodetect)&quot;,
+    &quot;node.js.selected.package.tslint&quot;: &quot;(autodetect)&quot;,
+    &quot;nodejs_package_manager_path&quot;: &quot;npm&quot;,
     &quot;run.code.analysis.last.selected.profile&quot;: &quot;pProject Default&quot;,
-    &quot;settings.editor.selected.configurable&quot;: &quot;project.propVCSSupport.DirectoryMappings&quot;
+    &quot;settings.editor.selected.configurable&quot;: &quot;preferences.fileTypes&quot;,
+    &quot;vue.rearranger.settings.migration&quot;: &quot;true&quot;
+  },
+  &quot;keyToStringList&quot;: {
+    &quot;com.intellij.ide.scratch.ScratchImplUtil$2/New Scratch File&quot;: [
+      &quot;Python&quot;
+    ]
   }
 }</component>
   <component name="RecentsManager">
@@ -62,6 +84,7 @@
       <option name="IS_MODULE_SDK" value="false" />
       <option name="ADD_CONTENT_ROOTS" value="true" />
       <option name="ADD_SOURCE_ROOTS" value="true" />
+      <EXTENSION ID="PythonCoverageRunConfigurationExtension" runner="coverage.py" />
       <option name="SCRIPT_NAME" value="$USER_HOME$/Documents/Family Share/GIS/test/test.py" />
       <option name="PARAMETERS" value="" />
       <option name="SHOW_COMMAND_LINE" value="false" />
@@ -76,6 +99,14 @@
         <item itemvalue="Python.test" />
       </list>
     </recent_temporary>
+  </component>
+  <component name="SharedIndexes">
+    <attachedChunks>
+      <set>
+        <option value="bundled-js-predefined-d6986cc7102b-76f8388c3a79-JavaScript-PY-243.24978.54" />
+        <option value="bundled-python-sdk-91e3b7efe1d4-466328ff949b-com.jetbrains.pycharm.pro.sharedIndexes.bundled-PY-243.24978.54" />
+      </set>
+    </attachedChunks>
   </component>
   <component name="SpellCheckerSettings" RuntimeDictionaries="0" Folders="0" CustomDictionaries="0" DefaultDictionary="application-level" UseSingleDictionary="true" transferred="true" />
   <component name="TaskManager">
@@ -85,83 +116,9 @@
       <option name="number" value="Default" />
       <option name="presentableId" value="Default" />
       <updated>1711674509003</updated>
-    </task>
-    <task id="LOCAL-00058" summary="visualize_blob_detection -&gt; visualize_blobs_on_img">
-      <created>1732780412967</created>
-      <option name="number" value="00058" />
-      <option name="presentableId" value="LOCAL-00058" />
-      <option name="project" value="LOCAL" />
-      <updated>1732780412967</updated>
-    </task>
-    <task id="LOCAL-00059" summary="blob_detection_visualization: True  removed from config.yaml">
-      <created>1732780710151</created>
-      <option name="number" value="00059" />
-      <option name="presentableId" value="LOCAL-00059" />
-      <option name="project" value="LOCAL" />
-      <updated>1732780710151</updated>
-    </task>
-    <task id="LOCAL-00060" summary="blob_detection.smk and czi2img.smk split from count.Snakefile">
-      <created>1732780787417</created>
-      <option name="number" value="00060" />
-      <option name="presentableId" value="LOCAL-00060" />
-      <option name="project" value="LOCAL" />
-      <updated>1732780787418</updated>
-    </task>
-    <task id="LOCAL-00061" summary="jpg2npy.Snakefile: aggr_label_count takes correct amount of scenes">
-      <created>1732781095665</created>
-      <option name="number" value="00061" />
-      <option name="presentableId" value="LOCAL-00061" />
-      <option name="project" value="LOCAL" />
-      <updated>1732781095665</updated>
-    </task>
-    <task id="LOCAL-00062" summary="jpg2npy.Snakefile: organize log">
-      <created>1732781879635</created>
-      <option name="number" value="00062" />
-      <option name="presentableId" value="LOCAL-00062" />
-      <option name="project" value="LOCAL" />
-      <updated>1732781879635</updated>
-    </task>
-    <task id="LOCAL-00063" summary="jpg2npy.Snakefile: organize log, added view/jpg in check">
-      <created>1732990177800</created>
-      <option name="number" value="00063" />
-      <option name="presentableId" value="LOCAL-00063" />
-      <option name="project" value="LOCAL" />
-      <updated>1732990177801</updated>
-    </task>
-    <task id="LOCAL-00064" summary="take blob/io.py blob/misc.py to blob_utils.py">
-      <created>1733029795494</created>
-      <option name="number" value="00064" />
-      <option name="presentableId" value="LOCAL-00064" />
-      <option name="project" value="LOCAL" />
-      <updated>1733029795494</updated>
-    </task>
-    <task id="LOCAL-00065" summary="label/ draft folder removed">
-      <created>1733029875053</created>
-      <option name="number" value="00065" />
-      <option name="presentableId" value="LOCAL-00065" />
-      <option name="project" value="LOCAL" />
-      <updated>1733029875053</updated>
-    </task>
-    <task id="LOCAL-00066" summary="load_locs and load_crops becomes load_locs">
-      <created>1733031925141</created>
-      <option name="number" value="00066" />
-      <option name="presentableId" value="LOCAL-00066" />
-      <option name="project" value="LOCAL" />
-      <updated>1733031925141</updated>
-    </task>
-    <task id="LOCAL-00067" summary="get_blob_statistics includes blob_width now">
-      <created>1733033452389</created>
-      <option name="number" value="00067" />
-      <option name="presentableId" value="LOCAL-00067" />
-      <option name="project" value="LOCAL" />
-      <updated>1733033452389</updated>
-    </task>
-    <task id="LOCAL-00068" summary="blob_utils first round clean up">
-      <created>1733036816622</created>
-      <option name="number" value="00068" />
-      <option name="presentableId" value="LOCAL-00068" />
-      <option name="project" value="LOCAL" />
-      <updated>1733036816622</updated>
+      <workItem from="1741109479174" duration="8541000" />
+      <workItem from="1741367012965" duration="4367000" />
+      <workItem from="1742212126836" duration="71000" />
     </task>
     <task id="LOCAL-00069" summary="img_utils">
       <created>1733037014629</created>
@@ -429,9 +386,89 @@
       <option name="project" value="LOCAL" />
       <updated>1738465376929</updated>
     </task>
-    <option name="localTasksCounter" value="107" />
+    <task id="LOCAL-00107" summary="singularity global">
+      <created>1738775248541</created>
+      <option name="number" value="00107" />
+      <option name="presentableId" value="LOCAL-00107" />
+      <option name="project" value="LOCAL" />
+      <updated>1738775248541</updated>
+    </task>
+    <task id="LOCAL-00108" summary="custom_palette">
+      <created>1740076893269</created>
+      <option name="number" value="00108" />
+      <option name="presentableId" value="LOCAL-00108" />
+      <option name="project" value="LOCAL" />
+      <updated>1740076893269</updated>
+    </task>
+    <task id="LOCAL-00109" summary="auc_pr">
+      <created>1740076913719</created>
+      <option name="number" value="00109" />
+      <option name="presentableId" value="LOCAL-00109" />
+      <option name="project" value="LOCAL" />
+      <updated>1740076913719</updated>
+    </task>
+    <task id="LOCAL-00110" summary="mcc_max">
+      <created>1740078473476</created>
+      <option name="number" value="00110" />
+      <option name="presentableId" value="LOCAL-00110" />
+      <option name="project" value="LOCAL" />
+      <updated>1740078473476</updated>
+    </task>
+    <task id="LOCAL-00111" summary="more RAM in train.Snakefile">
+      <created>1740078529628</created>
+      <option name="number" value="00111" />
+      <option name="presentableId" value="LOCAL-00111" />
+      <option name="project" value="LOCAL" />
+      <updated>1740078529628</updated>
+    </task>
+    <task id="LOCAL-00112" summary="import numpy as np">
+      <created>1740078554290</created>
+      <option name="number" value="00112" />
+      <option name="presentableId" value="LOCAL-00112" />
+      <option name="project" value="LOCAL" />
+      <updated>1740078554290</updated>
+    </task>
+    <task id="LOCAL-00113" summary="import numpy as np">
+      <created>1740078642702</created>
+      <option name="number" value="00113" />
+      <option name="presentableId" value="LOCAL-00113" />
+      <option name="project" value="LOCAL" />
+      <updated>1740078642702</updated>
+    </task>
+    <task id="LOCAL-00114" summary="        value_vars=['Precision', 'Recall', 'F1'],">
+      <created>1740078988629</created>
+      <option name="number" value="00114" />
+      <option name="presentableId" value="LOCAL-00114" />
+      <option name="project" value="LOCAL" />
+      <updated>1740078988629</updated>
+    </task>
+    <task id="LOCAL-00115" summary="        hue='ScoreType',">
+      <created>1740079461223</created>
+      <option name="number" value="00115" />
+      <option name="presentableId" value="LOCAL-00115" />
+      <option name="project" value="LOCAL" />
+      <updated>1740079461223</updated>
+    </task>
+    <task id="LOCAL-00116" summary="        value_vars=['F1'],">
+      <created>1740079584522</created>
+      <option name="number" value="00116" />
+      <option name="presentableId" value="LOCAL-00116" />
+      <option name="project" value="LOCAL" />
+      <updated>1740079584522</updated>
+    </task>
+    <task id="LOCAL-00132" summary="more RAM for jpg2npy">
+      <created>1742221914247</created>
+      <option name="number" value="00132" />
+      <option name="presentableId" value="LOCAL-00132" />
+      <option name="project" value="LOCAL" />
+      <updated>1742221914247</updated>
+    </task>
+    <option name="localTasksCounter" value="133" />
     <servers />
   </component>
+  <component name="TypeScriptGeneratedFilesManager">
+    <option name="version" value="3" />
+  </component>
   <component name="Vcs.Log.History.Properties">
     <option name="COLUMN_ID_ORDER">
       <list>
@@ -454,23 +491,6 @@
     </option>
   </component>
   <component name="VcsManagerConfiguration">
-    <MESSAGE value="eval_classification.py renamed" />
-    <MESSAGE value="protected hdf in train.Snakefile and labeled_crops in jpg2npy.Snakefile" />
-    <MESSAGE value="train.Snakefile: rep1,2,3,4 added for training [major]" />
-    <MESSAGE value="train.Snakefile: plot_saturation.py added [major]" />
-    <MESSAGE value="train.Snakefile: plot_saturation.py makedir" />
-    <MESSAGE value="randomized sub-sets" />
-    <MESSAGE value="polish" />
-    <MESSAGE value="get_replicate adapted to more situations" />
-    <MESSAGE value="polished" />
-    <MESSAGE value="more RAM for evaluation_on_val" />
-    <MESSAGE value="reduce RAM in evaluation_on_val.py" />
-    <MESSAGE value="reduce RAM in evaluation_on_val rule" />
-    <MESSAGE value="fixed bug and new plotting functions" />
-    <MESSAGE value="8-&gt; 16G RAM for blob_detection" />
-    <MESSAGE value="from keras.utils import to_categorical (now)" />
-    <MESSAGE value="misc" />
-    <MESSAGE value="blob_classification.py: probs in npy and probs in txt" />
     <MESSAGE value="train.Snakefile: simpler rule names, 16 threads for training" />
     <MESSAGE value="blob_classification.py: output clas.txt .prob and prob.npy" />
     <MESSAGE value="classification1 -&gt; count" />
@@ -479,6 +499,23 @@
     <MESSAGE value="blob_classification.py: MIN_P takes config.yaml" />
     <MESSAGE value="blob_classification.py: from tensorflow.keras.optimizers import Adam" />
     <MESSAGE value="basic reset added" />
-    <option name="LAST_COMMIT_MESSAGE" value="basic reset added" />
+    <MESSAGE value="singularity global" />
+    <MESSAGE value="custom_palette" />
+    <MESSAGE value="auc_pr" />
+    <MESSAGE value="mcc_max" />
+    <MESSAGE value="more RAM in train.Snakefile" />
+    <MESSAGE value="import numpy as np" />
+    <MESSAGE value="        value_vars=['Precision', 'Recall', 'F1']," />
+    <MESSAGE value="        hue='ScoreType'," />
+    <MESSAGE value="        value_vars=['F1']," />
+    <MESSAGE value="calculate_AUC_PR, calculate_MCC_Max" />
+    <MESSAGE value=" '.probs.txt', header=&quot;p_no,p_yes&quot;" />
+    <MESSAGE value="MCC_MAX" />
+    <MESSAGE value="MCC_MAX: title fixed" />
+    <MESSAGE value="AUC-PR" />
+    <MESSAGE value="'MCC-MAX'" />
+    <MESSAGE value="AUC curve" />
+    <MESSAGE value="more RAM for jpg2npy" />
+    <option name="LAST_COMMIT_MESSAGE" value="more RAM for jpg2npy" />
   </component>
 </project>
\ No newline at end of file
